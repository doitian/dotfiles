{%- macro install(index, location) -%}
phrase step {{ index }}:
  file.directory:
    - name: '{{ macros.abspath(location) }}'
    {%- if dotfiles.user is not none %}
    - user: {{ dotfiles.user }}
    {%- endif %}
    {%- if dotfiles.group is not none %}
    - group: {{ dotfiles.group }}
    {%- endif %}
    - makedirs: True
    {%- for k, v in kwargs.items() %}
    - {{ k }}: {{ v | json }}
    {%- endfor %}
{%- endmacro %}

{%- macro uninstall(index) -%}
{{ macros.noop(kwargs) -}}
phrase step {{ index }}:
  test.nop: []
{%- endmacro %}
